function [y, T, residual, g1] = dynamic_3(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(18, 1);
  residual(1)=(y(40))-(params(35)*(params(40)*(y(4)+1/(params(34)/(1-params(34)))*y(42))+y(41)*(1-params(40))+y(57)));
  residual(2)=(y(46))-(params(15)/(params(15)+1-params(7))*(y(40)-y(36))+y(35)*(1-params(7))/(params(15)+1-params(7))-y(3));
  T(1)=params(30)*y(41)+1/(1-params(28)/params(6))*y(39)-params(28)/params(6)/(1-params(28)/params(6))*y(7);
  residual(3)=(y(50))-(T(1)-(y(37)-y(19))+y(60));
  residual(4)=(y(38))-(y(49)*params(41)+y(50)*(1-params(41)));
  residual(5)=(y(43))-((-params(43))*(y(45)-y(35)-y(36))-params(46)*y(47)+y(61));
  residual(6)=(y(45))-(1.7*y(46)-0.7*y(20)+0.99*y(13)+y(62));
  residual(7)=(y(47))-(y(15)+y(43)*params(44)+y(63));
  residual(8)=(y(52))-(y(76));
  residual(9)=(y(51))-(y(69));
  residual(10)=(y(36))-((1-params(17))*y(4)+y(34)*params(17)+y(55)*params(26)*params(6)*params(6)*params(17));
  residual(11)=(y(37))-((y(33)-y(1)*params(37)-params(38)*(1-params(37))*y(40)-params(39)*(y(40)-y(8))-y(56))/((1-params(37))*params(36)));
  residual(12)=(y(39))-((y(40)-y(34)*params(21)-y(53)-params(23)*1/(params(34)/(1-params(34)))*y(42)-0.01*y(45))/params(22));
  residual(13)=(y(41))-(y(4)+1/(params(34)/(1-params(34)))*y(42)+y(42)-y(38));
  residual(14)=(y(34))-(1/(1+params(14)*params(6))*(y(2)+params(14)*params(6)*y(66)+1/(params(6)*params(6)*params(26))*y(35))+y(55));
  residual(15)=(y(35))-(params(15)/(params(15)+1-params(7))*y(74)-y(76)+(1-params(7))/(params(15)+1-params(7))*y(67));
  T(2)=(1-params(29))*(1-params(14)*params(6)*params(29))/((1+params(14)*params(6))*params(29))*1/(1+(params(8)-1)*params(11));
  T(3)=1/(1+T(2));
  residual(16)=(y(49))-(T(3)*(1/(1+params(14)*params(6))*y(6)+params(14)*params(6)/(1+params(14)*params(6))*y(70)+params(32)/(1+params(14)*params(6))*y(5)-y(37)*(1+params(14)*params(6)*params(32))/(1+params(14)*params(6))+y(51)*params(14)*params(6)/(1+params(14)*params(6))+T(2)*T(1)+y(59)));
  T(4)=(1-params(31))*(1-params(14)*params(6)*params(31))/params(31)/(1+(params(35)-1)*params(10));
  residual(17)=(y(42))-(params(42)*(y(57)+((y(37)-y(58))*(1+params(14)*params(6)*params(33))-(y(51)*params(14)*params(6)+y(5)*params(33)))/T(4)-y(38)*(1-params(40)))/params(40)+(1-params(42))*((1-params(40))/params(40)*(-y(38))+y(57)/params(40)));
  residual(18)=(y(44))-(y(11)+y(1)-y(19));
if nargout > 3
    g1_v = NaN(74, 1);
g1_v(1)=(-1);
g1_v(2)=(-0.99);
g1_v(3)=(-1);
g1_v(4)=0.7;
g1_v(5)=(-1);
g1_v(6)=1;
g1_v(7)=(-(params(35)*params(40)));
g1_v(8)=(-(1-params(17)));
g1_v(9)=(-1);
g1_v(10)=(-(params(39)/((1-params(37))*params(36))));
g1_v(11)=params(28)/params(6)/(1-params(28)/params(6));
g1_v(12)=(-(T(3)*T(2)*(-(params(28)/params(6)/(1-params(28)/params(6))))));
g1_v(13)=(-(1/(1+params(14)*params(6))*T(3)));
g1_v(14)=(-(1/(1+params(14)*params(6))));
g1_v(15)=1;
g1_v(16)=(-(T(3)*params(32)/(1+params(14)*params(6))));
g1_v(17)=(-(params(42)*(-params(33))/T(4)/params(40)));
g1_v(18)=(-(params(35)*(1-params(40))));
g1_v(19)=(-params(30));
g1_v(20)=1;
g1_v(21)=(-(T(3)*T(2)*params(30)));
g1_v(22)=1;
g1_v(23)=(-1.7);
g1_v(24)=1;
g1_v(25)=(-(1-params(41)));
g1_v(26)=(-params(41));
g1_v(27)=1;
g1_v(28)=params(46);
g1_v(29)=1;
g1_v(30)=params(43);
g1_v(31)=1;
g1_v(32)=(-((-0.01)/params(22)));
g1_v(33)=1;
g1_v(34)=(-params(44));
g1_v(35)=1;
g1_v(36)=1;
g1_v(37)=(-(T(3)*params(14)*params(6)/(1+params(14)*params(6))));
g1_v(38)=(-(params(42)*(-(params(14)*params(6)))/T(4)/params(40)));
g1_v(39)=params(15)/(params(15)+1-params(7));
g1_v(40)=(-params(43));
g1_v(41)=1;
g1_v(42)=1;
g1_v(43)=(-(params(15)/(params(15)+1-params(7))));
g1_v(44)=(-(((-(params(38)*(1-params(37))))-params(39))/((1-params(37))*params(36))));
g1_v(45)=(-(1/params(22)));
g1_v(46)=(-(1/(1-params(28)/params(6))));
g1_v(47)=1;
g1_v(48)=(-(T(3)*T(2)*1/(1-params(28)/params(6))));
g1_v(49)=1;
g1_v(50)=1;
g1_v(51)=(-(params(42)*(-(1-params(40)))/params(40)+(1-params(42))*(-((1-params(40))/params(40)))));
g1_v(52)=(-params(17));
g1_v(53)=(-((-params(21))/params(22)));
g1_v(54)=1;
g1_v(55)=(-((1-params(7))/(params(15)+1-params(7))));
g1_v(56)=(-params(43));
g1_v(57)=(-(1/(1+params(14)*params(6))*1/(params(6)*params(6)*params(26))));
g1_v(58)=1;
g1_v(59)=1;
g1_v(60)=1;
g1_v(61)=(-(T(3)*(-((1+params(14)*params(6)*params(32))/(1+params(14)*params(6))))));
g1_v(62)=(-(params(42)*(1+params(14)*params(6)*params(33))/T(4)/params(40)));
g1_v(63)=(-(params(35)*1/(params(34)/(1-params(34)))*params(40)));
g1_v(64)=(-((-(params(23)*1/(params(34)/(1-params(34)))))/params(22)));
g1_v(65)=(-(1+1/(params(34)/(1-params(34)))));
g1_v(66)=1;
g1_v(67)=1;
g1_v(68)=(-(T(3)*params(14)*params(6)/(1+params(14)*params(6))));
g1_v(69)=(-(params(14)*params(6)*1/(1+params(14)*params(6))));
g1_v(70)=(-((1-params(7))/(params(15)+1-params(7))));
g1_v(71)=(-1);
g1_v(72)=(-(params(15)/(params(15)+1-params(7))));
g1_v(73)=(-1);
g1_v(74)=1;
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 18, 54);
end
end
